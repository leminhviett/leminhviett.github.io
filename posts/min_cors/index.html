<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>The minimum every developer must know about CORS | Viet Le's Tech Blog</title><meta name=keywords content><meta name=description content="CORS mechanism & examples"><meta name=author content="Viet Le"><link rel=canonical href=https://vietmle.com/posts/min_cors/><link crossorigin=anonymous href=/assets/css/stylesheet.min.css rel="preload stylesheet" as=style><link rel=icon href=https://vietmle.com/images/ava.png><link rel=icon type=image/png sizes=16x16 href=https://vietmle.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://vietmle.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://vietmle.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://vietmle.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-FBXNST367F"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-FBXNST367F",{anonymize_ip:!1})}</script><meta property="og:title" content="The minimum every developer must know about CORS"><meta property="og:description" content="CORS mechanism & examples"><meta property="og:type" content="article"><meta property="og:url" content="https://vietmle.com/posts/min_cors/"><meta property="og:image" content="https://vietmle.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-18T09:47:52+07:00"><meta property="article:modified_time" content="2022-05-18T09:47:52+07:00"><meta property="og:site_name" content="Viet Le's Tech Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://vietmle.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="The minimum every developer must know about CORS"><meta name=twitter:description content="CORS mechanism & examples"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://vietmle.com/posts/"},{"@type":"ListItem","position":2,"name":"The minimum every developer must know about CORS","item":"https://vietmle.com/posts/min_cors/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"The minimum every developer must know about CORS","name":"The minimum every developer must know about CORS","description":"CORS mechanism \u0026amp; examples","keywords":[],"articleBody":"What is CORS?  CORS stands for Cross-Origin Resource Sharing. CORS is HTTP-header based mechanism set by server to inform client side about allowed origins (://:) other than its own. It also indicates method and headers which the server is willing to support (example included below). Most of client browsers enforce CORS whenever a cross-origin request is made. A request is cross-origin if it calls to outside origins, which are different from the one served the first resource.  CORS behaviour will be different between simple \u0026 “pre-flighted” requests. Let’s see the detail below.\nSimple requests   Refer here for full definition of simple request. For example, a GET request with no header is a simple request.\n  A simple request is sent directly to server. Let’s see how it works in the example below:\n Request 1: Client browser first load a web document from domain-a.com . The main request defines its origin as domain-a.com. This origin is then specified in the request header of subsequent requests. Origin: origin  Request 2: Client browser then send request to GET resource from domain-a.com. As comming from the same origin, the requested resource is fetched \u0026 rendered by browser. Request 3: similar to request 2**,** but the request now is sent to domain-b.com , which is a different origin.  The resource will be successfully fetched, but … It might be rendered by the browser only if in the response header, the allowed origin == domain-a.com (the request origin) or when it is a wildcard (*) meaning permit all origin.  Access-Control-Allow-Origin: origin | *     “Pre-flighted” requests   Any requests that are not simple is “pre-flighted” one.\n  Unlike simple request, the browser will send a “preflight” request (OPTION method) to see if the actual one (”pre-flighted” one) is allowed by the server.\n  A preflight request will include the following headers:\nOrigin: origin Access-Control-Request-Method: method Access-Control-Request-Headers: field-name[, field-name]*  To inform server about method and headers used in the actual request. To ask if the server allow client origin with given headers \u0026 method.    Server responses with the following headers if it supports:\nAccess-Control-Allow-Origin: origin | * Access-Control-Allow-Methods: method[, method]* Access-Control-Allow-Headers: header-name[, header-name]* Indicating origin, method \u0026 headers the server supports\n  Then, the browser will compare value in the response header against corresponding info of the actual request. If all is allowed, the actual request is sent; otherwise, not.\n  The preflight request can also be cached in client side with the time-to-live indicated in Access-Control-Max-Age response header\n  Final note CORS is server-side security configurations that clients may enforce it.\n Most browsers do (to avoid attack like CSRF). Some dev tools do not (like Postman).  Further reading \u0026 references: This article just covers surface of CORS. Further reading is highly recommended!\n Detailed visualization example: https://www.youtube.com/watch?v=Ka8vG5miErk\u0026t=621s Further analysis: https://www.stackhawk.com/blog/what-is-cors/ Reference: https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS  ","wordCount":"457","inLanguage":"en","datePublished":"2022-05-18T09:47:52+07:00","dateModified":"2022-05-18T09:47:52+07:00","author":{"@type":"Person","name":"Viet Le"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://vietmle.com/posts/min_cors/"},"publisher":{"@type":"Organization","name":"Viet Le's Tech Blog","logo":{"@type":"ImageObject","url":"https://vietmle.com/images/ava.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://vietmle.com/ accesskey=h title="Home (Alt + H)"><img src=https://vietmle.com/images/ava.png alt=logo aria-label=logo height=35>Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://vietmle.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://vietmle.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://vietmle.com/posts/about_me title="About me"><span>About me</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://vietmle.com/>Home</a>&nbsp;»&nbsp;<a href=https://vietmle.com/posts/>Posts</a></div><h1 class=post-title>The minimum every developer must know about CORS</h1><div class=post-meta><span title="2022-05-18 09:47:52 +0700 +0700">May 18, 2022</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Viet Le</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-is-cors aria-label="What is CORS?">What is CORS?</a><ul><li><a href=#simple-requests aria-label="Simple requests">Simple requests</a></li><li><a href=#pre-flighted-requests aria-label="“Pre-flighted” requests">“Pre-flighted” requests</a></li></ul></li><li><a href=#final-note aria-label="Final note">Final note</a></li><li><a href=#further-reading--references aria-label="Further reading &amp;amp; references:">Further reading & references:</a></li></ul></div></details></div><div class=post-content><h2 id=what-is-cors>What is CORS?<a hidden class=anchor aria-hidden=true href=#what-is-cors>#</a></h2><ul><li><strong>CORS</strong> stands for <strong>Cross-Origin Resource Sharing.</strong></li><li>CORS is <em>HTTP-header based mechanism</em> set by server to inform client side about <em>allowed origins</em> (<code>&lt;scheme>://&lt;hostname>:&lt;port></code>) other than its own. It also indicates method and headers which the server is willing to support (example included below).</li><li><strong>Most</strong> of client browsers enforce CORS whenever <em>a cross-origin request</em> is made.
A request is cross-origin if it calls to outside origins, which are different from the one served the first resource.</li></ul><p>CORS behaviour will be different between simple & “pre-flighted” requests. Let’s see the detail below.</p><h3 id=simple-requests>Simple requests<a hidden class=anchor aria-hidden=true href=#simple-requests>#</a></h3><ul><li><p>Refer <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#simple_requests>here</a> for full definition of simple request. For example, a GET request with no header is a simple request.</p></li><li><p>A simple request is sent directly to server.
Let’s see how it works in the example below:</p><p><img loading=lazy src=/images/[CORS]simple_request.png alt="Source: MDN web docs"></p><ul><li><strong>Request 1:</strong> Client browser first load a web document from <code>domain-a.com</code> . The main request defines its <code>origin</code> as <code>domain-a.com</code>. This origin is then specified in the request header of subsequent requests.<div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Origin: <span class=p>&lt;</span><span class=nt>origin</span><span class=p>&gt;</span>
</span></span></code></pre></div></li><li><strong>Request 2:</strong> Client browser then send request to GET resource from <code>domain-a.com</code>. As comming from the same origin, the requested resource is fetched & rendered by browser.</li><li><strong>Request 3:</strong> similar to request 2**,** but the request now is sent to <code>domain-b.com</code> , which is a different origin.<ul><li>The resource will be successfully fetched, but &mldr;</li><li>It might be rendered by the browser only if in the response header, the allowed origin == <code>domain-a.com</code> (the request origin) or when it is a wildcard (*) meaning permit all origin.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Access-Control-Allow-Origin: <span class=p>&lt;</span><span class=nt>origin</span><span class=p>&gt;</span> | *
</span></span></code></pre></div></li></ul></li></ul><h3 id=pre-flighted-requests>“Pre-flighted” requests<a hidden class=anchor aria-hidden=true href=#pre-flighted-requests>#</a></h3><ul><li><p>Any requests that are not simple is <strong>“pre-flighted” one</strong>.</p></li><li><p>Unlike simple request, the browser will send a <strong><em>“preflight” request</em></strong> (OPTION method) to see if the actual one (<strong>”pre-flighted” one</strong>) is allowed by the server.</p><p><img loading=lazy src=/images/[CORS]preflighted_request.png alt="Source: MDN web docs"></p></li><li><p>A <em>preflight request</em> will include the following headers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Origin: <span class=p>&lt;</span><span class=nt>origin</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>Access-Control-Request-Method: <span class=p>&lt;</span><span class=nt>method</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>Access-Control-Request-Headers: <span class=p>&lt;</span><span class=nt>field-name</span><span class=p>&gt;</span>[, <span class=p>&lt;</span><span class=nt>field-name</span><span class=p>&gt;</span>]*
</span></span></code></pre></div><ul><li>To inform server about method and headers used in the actual request.</li><li>To ask if the server allow client origin with given headers & method.</li></ul></li><li><p>Server responses with the following headers if it supports:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>Access-Control-Allow-Origin: <span class=p>&lt;</span><span class=nt>origin</span><span class=p>&gt;</span> | *
</span></span><span class=line><span class=cl>Access-Control-Allow-Methods: <span class=p>&lt;</span><span class=nt>method</span><span class=p>&gt;</span>[, <span class=p>&lt;</span><span class=nt>method</span><span class=p>&gt;</span>]*
</span></span><span class=line><span class=cl>Access-Control-Allow-Headers: <span class=p>&lt;</span><span class=nt>header-name</span><span class=p>&gt;</span>[, <span class=p>&lt;</span><span class=nt>header-name</span><span class=p>&gt;</span>]*
</span></span></code></pre></div><p>Indicating origin, method & headers the server supports</p></li><li><p>Then, the browser will compare value in the response header against corresponding info of the actual request. <strong>If all is allowed, the actual request is sent; otherwise, not.</strong></p></li><li><p>The preflight request can also be cached in client side with the time-to-live indicated in <code>Access-Control-Max-Age</code> response header</p></li></ul><h2 id=final-note>Final note<a hidden class=anchor aria-hidden=true href=#final-note>#</a></h2><p>CORS is server-side security configurations that <strong>clients may enforce it.</strong></p><ul><li>Most browsers do (to avoid attack like CSRF).</li><li>Some dev tools do not (like Postman).</li></ul><h2 id=further-reading--references>Further reading & references:<a hidden class=anchor aria-hidden=true href=#further-reading--references>#</a></h2><p>This article just covers surface of CORS. Further reading is highly recommended!</p><ul><li>Detailed visualization example: <a href="https://www.youtube.com/watch?v=Ka8vG5miErk&t=621s">https://www.youtube.com/watch?v=Ka8vG5miErk&t=621s</a></li><li>Further analysis: <a href=https://www.stackhawk.com/blog/what-is-cors/>https://www.stackhawk.com/blog/what-is-cors/</a></li><li>Reference: <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS>https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS</a></li></ul></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://vietmle.com/posts/about_me/><span class=title>Next Page »</span><br><span>About me</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://vietmle.com/>Viet Le's Tech Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>